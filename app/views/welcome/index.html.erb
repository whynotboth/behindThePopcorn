<!DOCTYPE html>
<html>
<body>

<style>
body{
  background-color: black;
  }

h1{
  padding-left: 200px;
  font-family: 'Fjalla One', sans-serif;
  font-size: 60px;
  color: #666666;
}
.container {
  position: relative;
  width: 80%;
}
.image {
  display: block;
  height: 300;
}
.overlay {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  height: 400;
  opacity: 0;
  transition: .5s ease;
  background-color: black;
}
.container:hover .overlay {
  opacity: .85;
}
.text {
  color: white;
  font-size: 20px;
  max-width: 100%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
}
.modal-body {
  display: block;
  font-family: 'Roboto Condensed', sans-serif;
  font-size: 18px;
  line-height: 1.5;
  width: 90%;
}
.modal-title {
  display: block;
  font-family: 'Anton', sans-serif;
  font-size: 32px;
}
.navbar-text{
  padding-left: 20px;
  font-family: 'Fjalla One', sans-serif;
  font-size: 24px;
  color: #666666;
}
.quickdirt-title{
  font-family: 'Indie Flower', cursive;
  font-size: 26px;
  width: 80%;
  padding-top: 15px;
  text-align: left;
}
.quickdirt-text{
  font-family: 'Indie Flower', cursive;
  font-size: 16px;
  width: 70%;
  text-align: left;
}
.prescrips-title{
  font-family: 'Pangolin', cursive;
  font-size: 38px;
  text-align: center;
  color: #c62100;
}
.prescrips-text{
  font-family: 'Pangolin', cursive;
  font-size: 18px;
  width: 60%;
  text-align: center;
  color: #c62100;
}
/* Add a black background color to the top navigation bar */
* {box-sizing: border-box;}

body {
  margin: 0;
  font-family: Arial;
}

.topnav {
  overflow: hidden;
  background-color: #666666;
}

.topnav a {
  float: left;
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #666666;
  color: black;
}

.topnav a.active {
  background-color: #397c2a;
  color: #fefff9;
}

.topnav .search-container {
  float: right;
}

.topnav input[type=text] {
  padding: 6px;
  margin-top: 8px;
  font-size: 17px;
  border: none;
}

.topnav .search-container button {
  float: right;
  padding: 6px 10px;
  margin-top: 8px;
  margin-right: 16px;
  background: #666666;
  font-size: 17px;
  border: none;
  cursor: pointer;
}

.topnav .search-container button:hover {
  background: #c10000;
}

@media screen and (max-width: 600px) {
  .topnav .search-container {
    float: none;
  }
  .topnav a, .topnav input[type=text], .topnav .search-container button {
    float: none;
    display: block;
    text-align: left;
    width: 100%;
    margin: 0;
    padding: 14px;
  }
  .topnav input[type=text] {
    border: 1px solid #ccc;  
  }
}
</style>


<!-- Logo and about phrase -->
<div class="container" style="width:100%; padding-top: 15px; padding-left:70px">
    <img src="/btpLogo2.png" height="120"><br>
    <p class="navbar-text">
      straight up movie reviews by Jacob Mello
    </p>
  </div>
<br>
<br>
<!-- End of logo area -->

<!-- Search Area -->
<div class="searchContainer" style="padding-left: 20px; padding-right: 20px">
<div class="topnav">
  <a class="active" href="#home">Recent 8</a>
  <a href="allreviews">More Reviews</a>
  <div class="search-container">
    <form action="/#">
      <input type="text" placeholder="Search coming soon!" name="search">
      <button type="submit"><i class="fa fa-search"></i></button>
    </form>
  </div>
</div>
</div>

<br><br>

<!-- Heading for the most recent 8 -->
  <h1> THE RECENT 8 </h1>

<!-- Set-up of the review layout -->
<div class="container-fluid" align="center">

<!-- Simple function used to populate the webpage with modals for each review -->
  <% @i = 0 %>
  <% @reviews[0..7].each do |review| %>
  <% @i = @i + 1 %>


  <!-- Button trigger modal -->
  <div style="display: inline-block;">
<div class="container" style="width: 275px; height: 350px;" >
<button type="button" class="btn" style="background-color:transparent" data-toggle="modal" data-target=#exampleModal<%= @i %>>
  <div class="container" style="width:100%" id=<%= review.title %>>
  <img src=<%= review.image.url %> alt=<%=review.title %> height="300px" class="image">
    <div class="overlay">
    <div class="text" id=<%= review.title %>><%= review.title %><br>
      <p style="font-family: 'Anton', sans-serif; font-size: 50px"><%= review.score %>%</p>
    </div>
  </div>
</div>
</button>
</div>

  </div>
  <!-- End button trigger modal -->

  <!-- Modal -->
<div class="modal fade" id=exampleModal<%= @i %> tabindex="-1" role="dialog" aria-labelledby=exampleModalLabel<%= @i %> aria-hidden="true">
  <div class="modal-dialog" role="document" style="width: 80%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" style="float: top" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
        </button>
        <h1 class="modal-title" id=ModalLabel<%= @i %>><%= review.title %></h1>
      </div>
      <div class="quickdirt-title">The quick and dirty:</div>
              <div class="quickdirt-text"><%= simple_format review.quickdirt %></div>


  <!--Progress bars used to display scores -->

    <!--Rotten Tomatoes Score -->
    <div id="score">
    <text style="font-family: 'Pangolin', cursive; text-align:center;">Rotten Tomatoes</text>
      <div class="progress" style="height: 5px; width:50%">
        <div class="progress-bar progress-bar-warning progress-bar-striped" style="width: <%=review.scoreRT%>%;" aria-valuenow="<%=review.scoreRT%>" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
    </div>
    <!-- Our Score -->
    <div id="score">
    <text style="font-family: 'Pangolin', cursive; text-align:center;">Behind the Popcorn</text>
      <div class="progress" style="width:50%;">
        <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" style="width: <%=review.score%>%;" aria-valuenow="<%=review.score%>" aria-valuemin="0" aria-valuemax="100">
        <%=review.score%>
        </div>
      </div>
    </div>

    <!-- if no score has been uploaded, then no progress bars should be displayed -->
    <!-- add script here to handle such a situation -->

  <!-- End progress bars -->

  <!-- Modal Body -->
      <div class="modal-body" align="left">
        <%= simple_format review.body %>
      </div>
      <p class="prescrips-title">Prescriptions</p>
      <div class="prescrips-text"><%= simple_format review.prescription %></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-dark" data-dismiss="modal">
          <img src="/logo_close.png" height="70" align="center">
        </button>
      </div>
    </div>
  </div>
</div>
  <!-- End Modal -->
  <% end %>
  <% @i = 0 %>
<!-- End of review population function -->
</div>
<!-- Close of entire layout container -->

</body>
</html>